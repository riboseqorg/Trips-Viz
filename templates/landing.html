{% extends "layout.html" %}
{% block content %}
    <head>
        <link rel="stylesheet"
              href="{{ url_for('static', filename='css/common.css') }}">
    </head>
    <style>
/* used to style links under riboseq/rnaseq sections: unvisited link */
a.org:link {
    font-size: 21px;
    text-decoration: none;
    color: #666666;
    }

/* visited link */
a.org:visited {
    font-size: 21px;
    text-decoration: none;
    color: #666666;
    }

/* mouse over link */
a.org:hover {
    font-size: 21px;
    text-decoration: none;
    color: #77abff;
    }

#about {
    padding-bottom: 150px;
    text-align:center;
    width: 100%;
    float: left;
    }

#desc {
	padding-left: 220px;
	padding-right: 220px;
	}

#riboseq {
    font-size: 25px;
    top: 50%;
    left: 42%;
    text-align: center;
    padding-bottom: 95px;
    }



span {
    display: inline-block;
    vertical-align: bottom;
    line-height: normal;
    }

.page-section {
  /* height: 480px; */
  /* width: 80%;
      margin-left: 35%; */
  margin-top: 0.1rem;
  padding: 2em;
  /* background: linear-gradient(45deg, #43cea2 10%, #185a9d 90%);
  color: white; */
  /* box-shadow: 0px 3px 10px 0px rgba(0, 0, 0, 0.4); */
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

//Drop down
.dropdown-menu li {
position: relative;
}
.dropdown-menu .dropdown-submenu {
display: none;
position: absolute;
left: 100%;
top: -7px;
}
.dropdown-menu .dropdown-submenu-left {
right: 100%;
left: auto;
}
.dropdown-menu > li:hover > .dropdown-submenu {
display: block;
}

.dropdown-hover:hover>.dropdown-menu {
display: inline-block;
}

.dropdown-hover>.dropdown-toggle:active {
/*Without this, clicking will make it sticky*/
pointer-events: none;
}
    </style>
    {% if message %}
        <div style="background-color:#85beff;
                    color:white;
                    padding:10px;
                    font-weight:bold;
                    font-size=200%"
             id="message">{{ message }}</div>
    {% endif %}
    <div id="about">
        <img align="center" width="15%" src="/static/trips.svg">
    </img>
    <div class="page-section">
        Trips-viz is a transcriptome browser designed to visualize Ribosome profiling and RNA-seq data at the level of a single gene/transcript isoform as opposed to at <a target="_blank" href="http://gwips.ucc.ie">the genome level</a>.
        Trips-viz also provides you the ability to vizualize data from a gene under different conditions, get meta-information at an individual dataset level such as read length distribution or triplet periodicity, and provides the ability
        to find differentially expressed or translated genes. For more information on any of these plots and general information on Trips-viz you can view the <a href="/help">help pages</a>, or see this brief
        <a href='https://trips.ucc.ie/help/?parent_acc=parent_walkthrough'>walkthrough</a> of some of the main features. To see the latest updates on Trips-Viz or to get information on the number of
        organisms and studies currently provided in Trips-Viz, you can view the <a href="/stats">statistics and updates page</a>. To get started click on an organism below.Trips-Viz is free and open to all users with no login requirement
        and is licensed under the <a href='https://trips.ucc.ie/license.txt'>MIT License</a>.
    </div>
</div>
{% set plots = {
    "Single transcript plot": "single_transcript_plot",
    "Single transcript comparison plot": "comparison",
    "Meta-Information": "metainfo_plot",
    "Differential plot": "differential",
    "Transcriptome info": "transinfo_plot",
    "Translated ORF detection": "orf_translation",
    "PausePred": "pause_detection"
} %}
<div id="organims">
    <b>Choose Organism</b>
    <div id="orglist">
        {% for organism, transcripts in organisms.items() %}
            {% if loop.index0 % 3 == 0 %}
                {% if loop.index0 != 0 %}
                    <!--div class="row"-->
                    <!--TODO: Remove forward div-->
                </div>
            {% endif %}
            <div class="row">
                <div class="card mb-3" style="max-width: 360px;">
                    <div class="dropdown">
                        <a class="btn btn-secondary dropdown-toggle"
                           href="#"
                           role="button"
                           data-bs-toggle="dropdown"
                           aria-expanded="false">
                            <div class="row g-0">
                                <div class="col-md-4">
                                    <img src="/static/images/species/ecoli.jpeg"
                                         class="img-fluid rounded-start"
                                         alt="E. coli"
                                         width="64"
                                         height="64">
                                </div>
                                <div class="col-md-8">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ organism }}</h5>
                                    </div>
                                </div>
                            </div>
                        </a>
                        <ul class="dropdown-menu">
                            {% for transcript in transcripts %}
                                <li>
                                    <a class="dropdown-item" href="#">{{ transcript }}</a>
                                    <ul class="dropdown-menu dropdown-submenu">
                                        {% for plot, page in plots.items() %}
                                            <li>
                                                <a class="dropdown-item"
                                                   href="/{{ organism }}/{{ transcript }}/{{ page }}/">{{ plot }}</a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            <!--TODO:ToRemove -->
        {% else %}
            <div class="card mb-3" style="max-width: 360px;">
                <div class="dropdown">
                    <a class="btn btn-secondary dropdown-toggle"
                       href="#"
                       role="button"
                       data-bs-toggle="dropdown"
                       aria-expanded="false">
                        <div class="row g-0">
                            <div class="col-md-4">
                                <img src="/static/images/species/ecoli.jpeg"
                                     class="img-fluid rounded-start"
                                     alt="E. coli"
                                     width="64"
                                     height="64">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title">{{ organism }}</h5>
                                </div>
                            </div>
                        </div>
                    </a>
                    <ul class="dropdown-menu">
                        {% for transcript in transcripts %}
                            <li>
                                <a class="dropdown-item" href="#">{{ transcript }}</a>
                                <ul class="dropdown-menu dropdown-submenu">
                                    {% for plot, page in plots.items() %}
                                        <li>
                                            <a class="dropdown-item"
                                               href="/{{ organism }}/{{ transcript }}/{{ page }}/">{{ plot }}</a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        {% endif %}
        {% if loop.last %}
            <!--div class="row"-->
            <!--TODO:Remove forward div-->
        </div>
    {% endif %}
{% endfor %}
</div>
</div>
<p>
    Trips-Viz is supported by Science Foundation Ireland and is a <a href="https://riboseq.org/">RiboSeq.org</a> and Elixir Resource.
    <img src="/static/SFI_logo.jpg" alt="SFI logo" height=100>
    <img src="/static/elixir-logo.png" height=100>
</p>
</body>
</html>
{% endblock %}
